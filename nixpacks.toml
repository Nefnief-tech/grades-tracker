[phases.setup]
nixPkgs = ['nodejs_20', 'openssl', 'gcc', 'python3']
cmds = ['npm config set prefix "/usr/local" && npm install -g pnpm']

[phases.install]
cmds = ['pnpm install --frozen-lockfile']

[phases.build]
cmds = ['pnpm build']
dependsOn = ['install']

[variables]
NODE_OPTIONS = '--max-old-space-size=4096'

[start]
cmd = 'pnpm start'
